<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="王星星"><title>拼多多两轮游 · 王星星的魔灯</title><meta name="description" content="很久就投递了拼多多的拼越计划，但是笔试挂，然后在提前批的时候笔试成功，大概在9月7号的时候开始的一面，12号的时候二面，然后等了将近一个半月，直接HR面试，然后就过了。。。感觉是白菜，果断拒绝。
一面
第一轮面试比较偏重基础


写出找到至少两门不及格的人的名次



name
score
cour"><meta name="keywords" content="王星星的魔灯,博客,王星星"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">王星星的魔灯</a></h3><div class="description"><p>勇士斗恶龙 <br> Love & Seriousness & Regularity & Persistence</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/wxxlamp"><i class="fa fa-github"></i></a></li><li><a href="mailto:stalern2000@163.com"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2305450070&amp;site=qq&amp;menu=yes"><i class="fa fa-qq"></i></a></li><li><a target="_blank" rel="noopener" href="https://zhihu.com/people/xiao-ming-91-8-39"><i class="fa fa-mortar-board"></i></a></li></ul><div class="footer"><div class="p"> <span>© 2018 - 2021 </span><i class="fa fa-star"></i><span> 王星星</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo </a><span> & </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core-Plus  </a></div><div class="beian"><a href="http://www.beian.miit.gov.cn/" target="_blank">豫ICP备20004458号-1</a><span style="height:10px;margin-left: 10px;">|</span><img src="/images/gongan.png" style="height:10px;margin-left: 10px;position: relative;top: 1px;"><span style="margin-left: 2px;">豫公网安备 44030400004458号</span></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/tags">标签</a></li><li><a href="/about">关于</a></li><li><a href="/guestbook">留言</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>拼多多两轮游</a></h3></div><div class="post-content"><p>很久就投递了拼多多的拼越计划，但是笔试挂，然后在提前批的时候笔试成功，大概在9月7号的时候开始的一面，12号的时候二面，然后等了将近一个半月，直接HR面试，然后就过了。。。感觉是白菜，果断拒绝。</p>
<h3 id="一面"><a href="#一面" class="headerlink" title="一面"></a>一面</h3><blockquote>
<p>第一轮面试比较偏重基础</p>
</blockquote>
<ol>
<li><p>写出找到至少两门不及格的人的名次</p>
<table>
<thead>
<tr>
<th>name</th>
<th>score</th>
<th>course</th>
</tr>
</thead>
<tbody><tr>
<td>王星星</td>
<td>98</td>
<td>语文</td>
</tr>
<tr>
<td>辰开</td>
<td>26</td>
<td>数学</td>
</tr>
</tbody></table>
<ul>
<li>思路要分为两步，首先查询成绩小于60的列，将其作为一个子表，然后在该子表上进行聚合，然后在该表上查找出现次数超过两次的姓名，此时，即是所要求的答案。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> </span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> question <span class="keyword">where</span> score &lt; <span class="number">60</span>) </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">name</span> </span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>聚簇索引</p>
<ul>
<li>要想理解什么是聚簇索引，我们首先要知道聚簇是什么意思。所谓的聚簇就是我们在查询的时候一次查询就可以命中目的值。最直观的，InnoDB的主键索引即为聚簇索引。</li>
<li>聚簇索引和非聚簇索引是建立在B+树的基础上</li>
</ul>
<ul>
<li><p>聚簇索引：key为主键，value为其余列的数据。一个表只能有一个聚簇索引</p>
</li>
<li><p>非聚簇索引：除了聚簇索引外的都叫非聚簇索引、</p>
<ol>
<li>对于MyISAM的主键索引来说，它的非聚簇索引是key为主键，value为行号*(不一定)*</li>
<li>对于MyISAM的二级索引来说，它的非聚簇索引是key为其他列，value为行号*(不一定)*</li>
<li>对于InnoDB的二级索引来说，它的非聚簇索引是key为其他列，value是主键</li>
</ol>
</li>
<li><p>非聚簇索引也叫二级索引</p>
</li>
<li><p>非聚集索引与聚集索引的区别在于非聚集索引的叶子节点不存储表中的数据，而是存储该列对应的主键（行号）</p>
</li>
<li><p>对于InnoDB来说，想要查找数据我们还需要根据主键再去聚集索引中进行查找，这个再根据聚集索引查找数据的过程，我们称为<strong>回表</strong>。第一次索引一般是顺序IO，回表的操作属于随机IO。需要回表的次数越多，即随机IO次数越多，我们就越倾向于使用全表扫描</p>
</li>
<li><p>通常情况下， 主键索引查询只会查一次，而非主键索引（非聚簇索引）需要回表查询多次。当然，如果是覆盖索引的话，查一次即可</p>
</li>
<li><p>注意：MyISAM无论主键索引还是二级索引都是非聚簇索引，而InnoDB的主键索引是聚簇索引，二级索引是非聚簇索引。我们自己建的索引基本都是非聚簇索引</p>
</li>
</ul>
</li>
<li><p>有四个属性abcd，一个索引index(a,b,c)，查询如下，谁的性能好，为什么？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> a = * <span class="keyword">and</span> c = * </span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> a = * <span class="keyword">and</span> d = *</span><br></pre></td></tr></table></figure>

<ul>
<li>这里面试官其实是在间接考察面试者关于组合索引的知识，面试者需要知道组合索引的结构是怎么样的</li>
<li>因为在index(a,b,c)这个组合索引中,它其实可以分为三个索引，分别是a，ab，abc，对于abc来说，它的存储方式是，当a相同时，再存储b，当B相同时，再存储C，这也是最左原则的来源</li>
<li>所以，这两个查询，都只用到了a的一个索引，所以性能几乎是一样的</li>
</ul>
</li>
<li><p>优化调用方式 有一个调用链路，从服务A到服务B，其中B被拆分为B1,B2和B3，然后服务B再调到服务C，其中C是数据库服务，请问调用链路中如何优化？</p>
<ul>
<li>如果B1，B2，B3是无序的，则可以通过多线程的方式调用</li>
<li>如果在B服务中的子服务需要用到前面的服务，则可以通过协程来操作</li>
<li>对于服务C的DB操作中，可以通过异步回调的方式，来提高IO的性能</li>
</ul>
</li>
<li><p>CAS的性能如何，它有什么缺点，它和悲观锁的比较</p>
<ul>
<li>CAS的全称是campare and swap，即比较交换，它的本质是一个乐观锁，在并发度低的场景中，乐观锁的性能是要优于悲观锁的。但是在并发高的场景中，CAS需要频繁比较和交换，这种情况下CAS的性能是不如悲观锁的。</li>
<li>对于CAS中的campare来说，极有可能出现ABA问题，即把a变为b，再把b变为a，中间改变了两次，但是对于另一个线程来说，还是a，它会认为这个变量并没有改变。</li>
<li>要想解决ABA问题，需要引入乐观锁的另一种解决方案，即版本号机制，这个在MySQL的MVCC中用的很多</li>
<li>同时，CAS需要去循环的比较，加入并发度高的话，无限的循环也是回消耗性能。这个可以参考Java悲观锁的优化</li>
</ul>
</li>
<li><p>并发和QPS有什么区别</p>
<ul>
<li>并发指的线程或者进程交替占用CPU的调度方式</li>
<li>而QPS则是query per second，表示每秒的查询次数</li>
</ul>
</li>
<li><p>算法题 ：无序数组找到波峰</p>
<ul>
<li><p>这个题的暴力解法，就是On遍历一遍，找到最大值</p>
</li>
<li><p>但是面试官显然想要找到时间复杂度小于On的解法，其实这是排序的一个简单变种，这里我们可以尝试分治法，这样时间复杂度就会被降到Ologn：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getMax</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(left == right) &#123;</span><br><span class="line">        <span class="keyword">return</span> nums[left];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> Math.max(getMax(nums, left, mid), getMax(nums, mid + <span class="number">1</span>, right));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>自己的优点</p>
<p>如果连自己的优点都不知道，那还如何说服面试官呢</p>
</li>
<li><p>最近在看什么书</p>
<p>这个主要面试官想考察你的持续学习力，我最近在看Netty和Mybatis相关的书哈哈哈</p>
</li>
</ol>
<h3 id="二面"><a href="#二面" class="headerlink" title="二面"></a>二面</h3><ol>
<li><p>RPC的序列化方式和原理</p>
<ul>
<li>对于RPC来说，其全称是Remote Produce Call，即远程过程调用，说白了，就是把远程的方法当做本地的方法来调。它的核心是帮助使用者更简单的调用网络中的接口或者方法。RPC只是一种调用方式，它可以用HTTP实现，可以用TCP实现。很多时候面试官会拿RPC和HTTP作比较，其实他俩完全不一样，如果真的要比较，只能说RPC调用起来更方便，同时如果用TCP实现的话，效率也更高，但是RPC的移植性和易用性不是很好。对于HTTP来说，不同语言之间都可以使用HTTP来进行调用</li>
<li>常见的PRC序列化方式有Java自带的序列化，需要继承Serializable，也有xml，json，或者是protobuf等等</li>
<li>RPC的序列化方式要考虑安全性，通用性，兼容性，性能和空间</li>
</ul>
</li>
<li><p>TCP的脏连接</p>
<ul>
<li>TCP的脏连接发生在TCP的握手的时候，假如第一次请求超时，client会重复发送请求，这时，如果只有两次握手的话，就会产生一个脏连接</li>
</ul>
</li>
<li><p>Java的网络连接</p>
<ul>
<li>Java中有三种IO方式，分别是BIO，NIO和AIO，这些IO不仅可以用于网络连接，也可用于磁盘等其他IO流</li>
<li>对于BIO来说，一个socket连接一个处理线程，这个线程负责相关数据传输操作，每个服务器需要多个这样的处理线程，然而这种情况下，当多个socket向服务器申请建立连接时，受限于操作系统所允许的最大线程数量的限制，服务器不能提供相应数量的处理线程，没有分配到处理线程的连接就会阻塞等待，所以BIO是<strong>阻塞</strong>的</li>
<li>NIO是JDK1.4实现的，通过selector.select()阻塞方法获取监听事件成功的channel，对于Linux来说，底层采用epoll实现</li>
<li>JDK7实现的，即Async非阻塞，是异步非阻塞的IO。异步非阻塞I/O模型。同步非阻塞需要一个线程不断去询问是否完成*(select)*，而异步非阻塞无需一个线程去轮询所有IO操作的状态改变，在相应的状态改变后，系统会通知对应的线程来处理</li>
</ul>
</li>
<li><p>代理模式的缺点</p>
<ul>
<li>代理模式就是给某一个对象创建一个代理对象，而由这个代理对象控制对原对象的引用，而创建这个代理对象就是可以在调用原对象时增加一些额外的操作，分为动态代理和静态代理。在Spring的AOP中最为常用。</li>
<li>对于Java来说，静态代理是编译期实现，而动态代理是运行期实现。对于Spring来说，有两种实现方式：<ol>
<li>JDK的动态代理需要实现一个公共的接口（通过接口找到代理的方法），动态代理生成的反射类Proxy是具体的代理，我们在实现了InvocationHandler之后的invoke中的方法会进入Proxy(<em>继承了Proxy，实现了接口</em>)的方法中</li>
<li>CGLib采用的是用创建一个继承实现类的子类，用asm库动态修改子类的代码来实现的，所以可以用传入的类引用执行代理类</li>
</ol>
</li>
<li>因为客户端和主题之间增加了一层代理，可能会导致性能变慢。同时对于Java来说，使用动态代理，会调用反射，同样会拖慢性能。</li>
</ul>
</li>
</ol>
<ol start="5">
<li><p>反射的性能为什么差</p>
<ul>
<li>编译器无法进行任何优化，因为它无法对所执行的操作有任何真正的了解。这可能<code>JIT</code>也适用</li>
<li>必须发现正在调用/创建的所有内容（即，按名称查找类，查找匹配项的方法等）</li>
<li>参数需要通过装箱/拆箱，包装成阵列，<code>Exceptions</code>包裹在<code>InvocationTargetException</code>s和重新抛出等方式进行修饰。</li>
<li>需要进行许多检测，如检查是否有无参数的构造函数，检查无参数构造函数的可访问性，检查caller是否有权使用反射,计算（在执行时）需要分配多少空间,调用构造函数代码（因为它事先不会知道构造函数为空）</li>
</ul>
</li>
<li><p>为什么会产生幻读</p>
<ul>
<li>幻读是指再按照某个条件查询的过程中，被其他线程插入和更新了其他行的数据，导致每次查询结果的范围不一样。</li>
<li>幻读会改变原有语义和数据一致性（在binlog中会有不一样的数据）</li>
<li>InnoDB会通过间隙锁解决幻读，间隙锁和行锁合称为next-key lock，是一个前开后闭区间</li>
</ul>
</li>
<li><p><code>String a = &quot;aaa&quot;; String b = &quot;aaa&quot;</code>，内存中有多少个aaa的对象</p>
<ol>
<li>这个真的是老面试题了，aaa在常量池中有一份，然后b也引用的常量池中的aaa，所以内存中只有一份。</li>
<li>这里要区分下面这个题：<code>String a = new String(&quot;aaa&quot;);</code>，这个会在内存中存在两份aaa，一个在常量池，一个在堆中</li>
</ol>
</li>
<li><p>Redis的跳表</p>
<ul>
<li>跳表是一种利用二分查找思想的数据结构，查找时间复杂度可以低到O(lgn)</li>
<li>对于数组来说，我们通过二分查找可以将时间复杂度降为lgn，但是链表不能直接拿到中间值，所以不能直接像数组一样进行二分查找，所以链表就通过分层的跳表来实现二分查找</li>
<li><img src="https://pic1.zhimg.com/v2-860f52775c852ccc783725f406a3cef3_1440w.jpg?source=172ae18b" alt="Redis内部数据结构之跳表"></li>
</ul>
</li>
<li><p>常量不可变的好处</p>
<ol>
<li>一个就是减少内存空间，Java中有运行时常量池，字符串常量池等等，它会把标位final的，基本类型的数值（Integer的范围是-127-128）作为常量存起来，提高了创建和摧毁时的性能开销，同时减少了内存消耗</li>
<li>第二个就是常量的不可变性，使得我们更容易进行并发编程，我们都知道并发编程的3个特点是，原子性，有序性和一致性，而常量，就天生满足了一致性这一要求。</li>
</ol>
</li>
<li><p>主键和唯一索引的区别</p>
<p>主键索引不需要回表，而唯一索引需要回表</p>
</li>
</ol>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>其实拼多多的问题感觉还好很基础，同时拼多多的面试感觉也很好，面试官一直在引导，给了我不错的面试体验。同时，一面面试官是阿里的8跳过去的，感觉问的虽然基础但是有深度，能给人一种探索技术的感觉，而不是单纯的八股文。</p>
<p>其实有一个尴尬的事情，拼多多二面的时候，面试官问我RPC的时候，我顺嘴提了一句阿里的RPC框架，当时说的是“High Speed Framework”，然后被面试官直接拆穿：“不就是好舒服（HSF）吗？”，当时尴尬一笑，原来拼多多二面面试官也是阿里的。。。</p>
<p><strong>果然每年向社会输送7000人才不是乱说的，阿里巴巴，yyds</strong></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2020-12-29</span><i class="fa fa-tag"></i><a class="tag" href="/categories/面试经验/" title="面试经验">面试经验 </a><a class="tag" href="/tags/Java/" title="Java">Java </a><a class="tag" href="/tags/Campus-Recruitment/" title="Campus Recruitment">Campus Recruitment </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://wxxlamp.cn/2020/12/29/pdd-interview-20/,王星星的魔灯,拼多多两轮游,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2020/12/30/reduce-loop/" title="拆循环的骚操作">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2020/12/24/kotlin-learn/" title="Kotlin学习笔记">下一篇</a></li></ul></div><script src="/js/visitors.js"></script><a id="comments"></a><div id="vcomments" style="margin:0 30px;"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@latest/dist/Valine.min.js"></script><script>var valine = new Valine({
  el:'#vcomments',
  notify:false || false, 
  verify:false|| false, 
  app_id:'VzGOJC7bFNXeYUEicbM4nOT2-gzGzoHsz',
  app_key:'T3VwGNzVqiWepoUHUQMnh8tP',
  placeholder:'念念不忘，必有回响...',
  path: window.location.pathname,
  serverURLs: '',
  visitor:true,
  recordIP:true,
  avatar:'mp'
})</script></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script src="/js/baidu-tongji.js"></script></body></html>